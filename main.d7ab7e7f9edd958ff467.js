(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1heY":function(t,e,i){},"4oE1":function(t,e,i){t.exports=i.p+"images/default.jpg"},AXzP:function(t,e,i){var n=i("mp5j");t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,a){return'<div class="page-container">\n    <h1 class="page-title">Популярные фильмы</h1>\n    <div class="js-home">\n        <ul class="page-main__films-list"></ul>\n    </div>\n    <div class="pagination">\n        <button class="btn-prev" disabled>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                <path\n                    d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm2 12l-4.5 4.5 1.527 1.5 5.973-6-5.973-6-1.527 1.5 4.5 4.5z" />\n            </svg>\n        </button>\n        <span class="current-page">1</span>\n        <button class="btn-next">\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                <path\n                    d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm2 12l-4.5 4.5 1.527 1.5 5.973-6-5.973-6-1.527 1.5 4.5 4.5z" />\n            </svg>\n        </button>\n    </div>\n</div>'},useData:!0})},JNau:function(t,e,i){var n=i("mp5j");t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,a){var s,l=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,o="function",c=t.escapeExpression;return'<li class="film-card__container" title=\''+c(typeof(s=null!=(s=i.title||(null!=e?e.title:e))?s:r)===o?s.call(l,{name:"title",hash:{},data:a,loc:{start:{line:1,column:40},end:{line:1,column:49}}}):s)+'\'><img class="film-poster"\r\n        src="http://image.tmdb.org/t/p/w300'+c(typeof(s=null!=(s=i.poster_path||(null!=e?e.poster_path:e))?s:r)===o?s.call(l,{name:"poster_path",hash:{},data:a,loc:{start:{line:2,column:43},end:{line:2,column:60}}}):s)+'" alt="'+c(typeof(s=null!=(s=i.original_title||(null!=e?e.original_title:e))?s:r)===o?s.call(l,{name:"original_title",hash:{},data:a,loc:{start:{line:2,column:67},end:{line:2,column:87}}}):s)+'" data-id="'+c(typeof(s=null!=(s=i.id||(null!=e?e.id:e))?s:r)===o?s.call(l,{name:"id",hash:{},data:a,loc:{start:{line:2,column:98},end:{line:2,column:106}}}):s)+'">\r\n    <p class="film-card__name">'+c(typeof(s=null!=(s=i.title||(null!=e?e.title:e))?s:r)===o?s.call(l,{name:"title",hash:{},data:a,loc:{start:{line:3,column:31},end:{line:3,column:40}}}):s)+"</p>\r\n\r\n</li>"},useData:!0})},mng9:function(t,e,i){"use strict";i.r(e);i("Z/Hh"),i("1heY"),i("uQK7"),i("Muwe"),i("aZFp");var n=i("AXzP"),a=i.n(n),s=i("tSwl"),l=i.n(s);i("JBxO"),i("FdtR"),i("wcNg");function r(t,e,i,n,a,s,l){try{var r=t[s](l),o=r.value}catch(t){return void i(t)}r.done?e(o):Promise.resolve(o).then(n,a)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var s=t.apply(e,i);function l(t){r(s,n,a,l,o,"next",t)}function o(t){r(s,n,a,l,o,"throw",t)}l(void 0)}))}}var c,u,d,h="https://api.themoviedb.org/3/",m="4c70739ab1bc7f2c582885ab460406ce",g={allFilms:(d=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,fetch(h+"movie/popular?language=ru-RU&api_key="+m+"&page="+e).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),filmInfo:(u=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,fetch(h+"movie/"+e+"?api_key="+m+"&language=ru-RU").then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)}),searchFilms:(c=o(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,fetch(h+"search/movie?language=ru-RU&api_key="+m+"&query="+e+"&page="+i).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return c.apply(this,arguments)})},p=i("JNau"),f=i.n(p),v=(i("Xlt+"),i("X5mX"),i("uH8g")),b=i.n(v),y=(i("RtS0"),i("8cZI"),i("lmye"),i("3dw1"),function(t,e){t.insertAdjacentHTML("beforeend",e)}),_=function(t){t.innerHTML=""},w=function(t,e){return t.map((function(t){return e(t)})).join("")},S=function(){document.querySelectorAll(".film-poster").forEach((function(t){"http://image.tmdb.org/t/p/w300"===t.src&&(t.src="../images/default.jpg")}))},q={init:function(){this.watchedFlag=!1,this.queuedFlag=!1,this.main=document.querySelector(".page-main"),this.filmList=document.querySelector(".page-main__films-list"),this.filmId=this.filmId?this.filmId:window.location.search.split("?")[1],this.bindEvents()},bindEvents:function(){this.filmList.addEventListener("click",this.generateFilmInfoPage.bind(this))},getFilmId:function(t){"IMG"===t.target.tagName?this.filmId=t.target.dataset.id:"P"===t.target.tagName?this.filmId=t.target.previousElementSibling.dataset.id:this.filmId=void 0},getMovieData:function(){var t=this;this.filmId&&(_(I.main),g.filmInfo(this.filmId).then((function(e){y(t.main,b()(e)),t.addToLibrary(),S()})))},generateFilmInfoPage:function(){-1===window.location.href.indexOf("movie")&&this.getFilmId(event),void 0!==this.filmId&&(_(this.main),this.getMovieData(),history.pushState(null,null,"/movie?"+this.filmId))},addToLibrary:function(){localStorage.setItem("watchedFilms",[I.watched]),localStorage.setItem("queuedFilms",[I.queued]),this.addToWatchBtn=document.querySelector("#overlooked"),this.addToQueueBtn=document.querySelector("#add-to-queue"),this.getLocalStorageWatchedData(),this.getLocalStorageQueuedData(),this.addToWatchBtn.addEventListener("click",this.toggleWatchedStatus.bind(this)),this.addToQueueBtn.addEventListener("click",this.toggleQueuedStatus.bind(this)),this.watchedFlag?(this.addToWatchBtn.innerText="Добавить",this.watchedFlag=!1):(this.addToWatchBtn.innerText="Удалить",this.watchedFlag=!0),this.queuedFlag?(this.addToQueueBtn.innerText="Добавить",this.queuedFlag=!1):(this.addToQueueBtn.innerText="Удалить",this.queuedFlag=!0)},addToLocalStorage:function(t,e){0!==e.length?-1===e.indexOf(this.filmId)&&(e.push(this.filmId),localStorage.setItem(t,[e])):(e.push(this.filmId),localStorage.setItem(t,[e]))},removeFromLocalStorage:function(t,e){var i=e.indexOf(this.filmId);e.splice(i,1),localStorage.setItem(t,e)},getLocalStorageWatchedData:function(){null!==localStorage.getItem("watchedFilms")&&(localStorage.getItem("watchedFilms").split(",").indexOf(this.filmId)>-1?this.watchedFlag=!1:this.watchedFlag=!0)},getLocalStorageQueuedData:function(){null!==localStorage.getItem("queuedFilms")&&(localStorage.getItem("queuedFilms").split(",").indexOf(this.filmId)>-1?this.queuedFlag=!1:this.queuedFlag=!0)},toggleWatchedStatus:function(){this.watchedFlag?(this.addToWatchBtn.innerText="Добавить",this.watchedFlag=!1,this.removeFromLocalStorage("watchedFilms",I.watched)):(this.addToWatchBtn.innerText="Удалить",this.watchedFlag=!0,this.addToLocalStorage("watchedFilms",I.watched))},toggleQueuedStatus:function(){this.queuedFlag?(this.addToQueueBtn.innerText="Добавить",this.queuedFlag=!1,this.removeFromLocalStorage("queuedFilms",I.queued)):(this.addToQueueBtn.innerText="Удалить",this.queuedFlag=!0,this.addToLocalStorage("queuedFilms",I.queued))}},F={init:function(){this.query=this.query?this.query:window.location.search.split("?")[1],this.page=1,this.pageNumber=document.querySelector(".current-page"),this.nextBtn=document.querySelector(".btn-next"),this.prevBtn=document.querySelector(".btn-prev"),this.pageTitle=document.querySelector(".page-title"),this.filmList=document.querySelector(".page-main__films-list"),this.searchForm=document.querySelector(".search__form"),this.searchInput=document.querySelector(".search__input"),window.location.href.indexOf("search")>-1&&this.getSearchedFilms(this.query,this.page),this.bindEvents()},bindEvents:function(){this.searchForm.addEventListener("submit",this.submitSearch.bind(this)),this.searchInput.addEventListener("input",this.getSearchQuery.bind(this)),this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))},submitSearch:function(t){t.preventDefault(),this.getSearchPage()},getSearchPage:function(){void 0!==this.query&&(history.pushState(null,null,"/search?"+this.query),location.reload())},getSearchedFilms:function(t,e){var i=this;this.pageTitle.innerText="Результат поиска:",this.searchInput.value="",g.searchFilms(t,e).then((function(t){i.page=t.page,_(i.filmList),y(i.filmList,w(t.results,f.a)),S(),1===i.page&&i.prevBtn.setAttribute("disabled",""),i.page===t.total_pages&&i.nextBtn.setAttribute("disabled",""),t.total_pages<=20?(i.prevBtn.setAttribute("disabled",""),i.nextBtn.setAttribute("disabled","")):i.nextBtn.removeAttribute("disabled")}))},getSearchQuery:function(t){return this.query=t.target.value},generateAnotherPage:function(){_(this.filmList),window.scrollTo(0,0),this.prevBtn.removeAttribute("disabled"),this.pageNumber.innerHTML=this.page,window.location.href.indexOf("search")>-1&&this.getSearchedFilms(this.query,this.page)},nextPage:function(){this.page++,this.generateAnotherPage()},prevPage:function(){this.page--,this.generateAnotherPage()}},L={init:function(){this.page=1,this.pageNumber=document.querySelector(".current-page"),this.nextBtn=document.querySelector(".btn-next"),this.prevBtn=document.querySelector(".btn-prev"),this.pageTitle=document.querySelector(".page-title"),this.filmList=document.querySelector(".page-main__films-list"),"/"===window.location.pathname&&this.getAllFilms(this.page),this.bindEvents(),q.init(),F.init()},bindEvents:function(){this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))},getAllFilms:function(t){var e=this;g.allFilms(t||1).then((function(t){return e.page=t.page,_(e.filmList),y(e.filmList,w(t.results,f.a)),S(),1===e.page&&e.prevBtn.setAttribute("disabled",""),e.page===t.total_pages&&e.nextBtn.setAttribute("disabled",""),t}))},generateAnotherPage:function(){_(this.filmList),window.scrollTo(0,0),this.prevBtn.removeAttribute("disabled"),this.pageNumber.innerHTML=this.page,"/"===window.location.pathname&&this.getAllFilms(this.page)},nextPage:function(){this.page++,this.generateAnotherPage()},prevPage:function(){this.page--,this.generateAnotherPage()}},x={init:function(){this.filmList=document.querySelector(".page-main__films-list"),this.watchedFilms=document.querySelector(".page-main__films-list--watched"),this.queuedFilms=document.querySelector(".page-main__films-list--queued"),this.build("watchedFilms",this.watchedFilms),this.build("queuedFilms",this.queuedFilms),this.bindEvents(),q.init(),this.getTrigger()},bindEvents:function(){this.queuedFilms.addEventListener("click",q.generateFilmInfoPage.bind(q))},build:function(t,e){null!==localStorage.getItem(t)&&localStorage.getItem(t).split(",").forEach((function(t){""!==t&&g.filmInfo(t).then((function(t){y(e,f()(t)),S()}))}))},getTrigger:function(){document.querySelectorAll(".js-tab-trigger").forEach((function(t){t.addEventListener("click",(function(){var e=this.getAttribute("data-tab"),i=document.querySelector('.js-tab-content[data-tab="'+e+'"]'),n=document.querySelector(".js-tab-trigger.active"),a=document.querySelector(".js-tab-content.active");n.classList.remove("active"),t.classList.add("active"),a.classList.remove("active"),i.classList.add("active")}))}))}},I={init:function(){this.watched=localStorage.getItem("watchedFilms")?localStorage.getItem("watchedFilms").split(","):[],this.queued=localStorage.getItem("queuedFilms")?localStorage.getItem("queuedFilms").split(","):[],this.main=document.querySelector(".page-main"),this.homePageLink=document.querySelector(".header-nav__link--main"),this.logoLink=document.querySelector(".header-nav__logo"),this.libraryPageLink=document.querySelector(".header-nav__link--library"),this.mainPage=document.querySelector(".js-home"),this.toTopBtn=document.querySelector(".page-footer__to-top"),this.loader=document.querySelector(".loader"),this.bindEvents(),this.showPages(),window.onload=this.deleteLoader()},bindEvents:function(){this.homePageLink.addEventListener("click",this.generateHomePage.bind(this)),this.logoLink.addEventListener("click",this.generateHomePage.bind(this)),this.libraryPageLink.addEventListener("click",this.generateLibraryPage.bind(this)),this.toTopBtn.addEventListener("click",this.scrollToTop.bind(this))},generateHome:function(){_(this.main),y(this.main,a()(this.main)),L.init()},generateHomePage:function(t){t.preventDefault(),history.pushState(null,null,"/"),this.generateHome()},generateLibraryPage:function(t){t.preventDefault(),this.generateLibrary()},generateLibrary:function(){_(this.main),y(this.main,l()(this.main)),history.pushState(null,null,"/library"),x.init()},showPages:function(){this.generateHome(),window.location.href.indexOf("library")>-1&&this.generateLibrary(),window.location.href.indexOf("movie")>-1&&q.generateFilmInfoPage()},deleteLoader:function(){setTimeout((function(){var t=document.querySelector(".loader"),e=document.querySelector("body"),i=document.querySelector("header"),n=document.querySelector("footer");i.style.visibility="visible",n.style.visibility="visible",e.style.overflow="visible",t.style.display="none"}),500)},scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})}};I.init();i("4oE1")},tSwl:function(t,e,i){var n=i("mp5j");t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,a){return'<div class="page-container">\n    <h1 class="page-title">Моя библиотека</h1>\n    <div class="tabs">\n        <ul class="tab-header">\n            <li class="tab-header__item js-tab-trigger active" data-tab="1">Просмотренные</li>\n            <li class="tab-header__item js-tab-trigger" data-tab="2">В очереди</li>\n        </ul>\n        <ul class="tab-content">\n            <li class="tab-content__item js-tab-content active" data-tab="1">\n                <ul class="page-main__films-list page-main__films-list--watched"></ul>\n            </li>\n            <li class="tab-content__item js-tab-content" data-tab="2">\n                <ul class="page-main__films-list page-main__films-list--queued"></ul>\n            </li>\n        </ul>\n    </div>\n</div>'},useData:!0})},uH8g:function(t,e,i){var n=i("mp5j");t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,a){var s,l=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,o="function",c=t.escapeExpression;return'<div class="page-container">\n    <h1 class="page-title">Информация о фильме</h1>\n    <div class="js-home">\n        <ul class="page-main__films-list">\n            <li class="film__card">\n                <div class="card">\n                    <img class="film-poster film__card--poster" src=\'http://image.tmdb.org/t/p/w300'+c(typeof(s=null!=(s=i.poster_path||(null!=e?e.poster_path:e))?s:r)===o?s.call(l,{name:"poster_path",hash:{},data:a,loc:{start:{line:7,column:99},end:{line:7,column:114}}}):s)+"'\n                        alt="+c(typeof(s=null!=(s=i.original_title||(null!=e?e.original_title:e))?s:r)===o?s.call(l,{name:"original_title",hash:{},data:a,loc:{start:{line:8,column:28},end:{line:8,column:46}}}):s)+' />\n                    <div class="card-info">\n                        <div class="card-title-summary">\n                            <div class="card-title-star">\n                                <h3 class="film__card--title">'+c(typeof(s=null!=(s=i.title||(null!=e?e.title:e))?s:r)===o?s.call(l,{name:"title",hash:{},data:a,loc:{start:{line:12,column:62},end:{line:12,column:71}}}):s)+'</h3>\n                                <div class="film__card-attr">\n                                    <span class="film__card-stars"><i\n                                            class="material-icons icon--star">stars</i>'+c(typeof(s=null!=(s=i.vote_average||(null!=e?e.vote_average:e))?s:r)===o?s.call(l,{name:"vote_average",hash:{},data:a,loc:{start:{line:15,column:87},end:{line:15,column:103}}}):s)+'</span>\n                                    <span class="film__card-release">Дата выхода: '+c(typeof(s=null!=(s=i.release_date||(null!=e?e.release_date:e))?s:r)===o?s.call(l,{name:"release_date",hash:{},data:a,loc:{start:{line:16,column:82},end:{line:16,column:98}}}):s)+'</span>\n\n                                </div>\n                            </div>\n                            <div>\n                                <details>\n                                    <summary>Показать описание</summary>\n                                    <p class="text-summary">\n                                        '+c(typeof(s=null!=(s=i.overview||(null!=e?e.overview:e))?s:r)===o?s.call(l,{name:"overview",hash:{},data:a,loc:{start:{line:24,column:40},end:{line:24,column:52}}}):s)+'</p>\n                                </details>\n                            </div>\n                        </div>\n                        <div class="film__card-buttons">\n                            <button id="overlooked" class="film__card-button">\n                                <i class="material-icons icon--star">folder_open</i><span class="btn-span">Добавить в\n                                    просмотренные</span>\n                            </button>\n                            <button id="add-to-queue" class="film__card-button">\n                                <i class="material-icons icon--star">add_circle_outline</i><span\n                                    class="btn-span">Добавить\n                                    в очередь просмотра</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>'},useData:!0})}},[["mng9",1,2]]]);
//# sourceMappingURL=main.d7ab7e7f9edd958ff467.js.map